<UserControl x:Class="ETMPClient.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ETMPClient.Views"
             xmlns:converters="clr-namespace:ETMPClient.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <converters:ByteArrayToImageConverter x:Key="ByteArrayToImageConverter"/>
    </UserControl.Resources>

    <Grid>
        <!-- Blurred Background Album Art -->
        <Border ClipToBounds="True">
            <Border.Background>
                <ImageBrush ImageSource="{Binding CoverArt, Converter={StaticResource ByteArrayToImageConverter}}" 
                            Stretch="UniformToFill" Opacity="0.15">
                    <ImageBrush.Transform>
                        <ScaleTransform ScaleX="1.2" ScaleY="1.2" CenterX="0.5" CenterY="0.5"/>
                    </ImageBrush.Transform>
                </ImageBrush>
            </Border.Background>
            <Border.Effect>
                <BlurEffect Radius="80"/>
            </Border.Effect>
        </Border>

        <!-- Main Content -->
        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
            <!-- Album Art -->
            <Border Width="300" Height="300" CornerRadius="{Binding HomeCornerRadius}" 
                    Background="{StaticResource Brush.Base.Surface}"
                    BorderBrush="{StaticResource Brush.Border.Glass}" BorderThickness="1"
                    HorizontalAlignment="Center" Margin="0,0,0,30"
                    ClipToBounds="True">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Opacity="0.5" BlurRadius="30" ShadowDepth="0"/>
                </Border.Effect>
                
                <Grid>
                    <!-- Fallback Icon -->
                    <TextBlock Text="&#xE8D6;" FontFamily="Segoe MDL2 Assets" FontSize="120" 
                               Foreground="{StaticResource Brush.Accent.Primary}" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.2"/>
                    
                    <!-- Album Cover -->
                    <Image Source="{Binding CoverArt, Converter={StaticResource ByteArrayToImageConverter}}" 
                           Stretch="UniformToFill"
                           RenderOptions.BitmapScalingMode="HighQuality"/>
                </Grid>
            </Border>

            <!-- Song Title -->
            <TextBlock Text="{Binding SongName}" 
                       FontFamily="{StaticResource Urbanist}" FontSize="{Binding HomeTitleFontSize}" FontWeight="Bold"
                       Foreground="{StaticResource Brush.Text.Primary}" 
                       TextAlignment="Center" Margin="0,0,0,10"/>

            <!-- Artist Name -->
            <TextBlock Text="{Binding ArtistName}" 
                       FontFamily="{StaticResource Urbanist}" FontSize="{Binding HomeArtistFontSize}" FontWeight="SemiBold"
                       Foreground="{StaticResource Brush.Text.Secondary}" 
                       TextAlignment="Center" Opacity="0.75"/>
        </StackPanel>
    </Grid>
</UserControl>
